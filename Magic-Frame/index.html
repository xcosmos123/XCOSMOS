<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Magic AR Frame - Xcosmos</title>
    <!-- ‡¥é-‡¥´‡µç‡¥∞‡µÜ‡¥Ø‡¥ø‡¥Ç, ‡¥Æ‡µà‡µª‡¥°‡µç-‡¥é‡¥Ü‡µº ‡¥≤‡µà‡¥¨‡µç‡¥∞‡¥±‡¥ø‡¥ï‡µæ -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <style>
      body { margin: 0; overflow: hidden; }
      
      /* ‡¥∏‡µç‡¥±‡µç‡¥±‡¥æ‡µº‡¥ü‡µç‡¥ü‡µç ‡¥¨‡¥ü‡µç‡¥ü‡µ∫ ‡¥∏‡µç‡¥±‡µç‡¥±‡µà‡µΩ */
      #start-button {
        position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
        padding: 15px 30px; background: #ff0055; color: white; border: none;
        border-radius: 50px; font-size: 18px; font-weight: bold; z-index: 999; 
        display: none; cursor: pointer; box-shadow: 0 4px 20px rgba(255, 0, 85, 0.5);
      }

      /* ‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡¥Ç ‡¥∏‡µç‡¥±‡µç‡¥±‡¥æ‡¥±‡µç‡¥±‡¥∏‡µç ‡¥ï‡¥æ‡¥£‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡¥®‡µÅ‡¥≥‡µç‡¥≥ ‡¥¨‡µã‡¥ï‡µç‡¥∏‡µç */
      #status-log {
        position: absolute; top: 10px; left: 10px; z-index: 1000;
        background: rgba(0, 0, 0, 0.85); color: #00ff00; 
        font-family: 'Courier New', monospace; font-size: 11px; padding: 12px;
        border-radius: 8px; pointer-events: none; max-width: 85%;
        border: 1px solid #333; line-height: 1.4;
      }

      /* ‡¥≤‡µã‡¥°‡¥ø‡¥Ç‡¥ó‡µç ‡¥∏‡µç‡¥ï‡µç‡¥∞‡µÄ‡µª */
      #loading-screen {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: #000; color: white; display: flex;
        justify-content: center; align-items: center; z-index: 998;
        flex-direction: column;
      }

      .spinner {
        border: 4px solid rgba(255, 255, 255, 0.1);
        border-left-color: #ff0055;
        width: 40px; height: 40px; border-radius: 50%;
        animation: spin 1s linear infinite; margin-bottom: 20px;
      }
      @keyframes spin { to { transform: rotate(360deg); } }
    </style>
  </head>
  <body>
    
    <div id="status-log">‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡¥Ç ‡¥§‡¥Ø‡µç‡¥Ø‡¥æ‡¥±‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ... (System Initializing)</div>

    <div id="loading-screen">
      <div class="spinner"></div>
      <div style="font-size: 22px; letter-spacing: 2px; font-weight: bold;">XCOSMOS MAGIC</div>
      <div style="font-size: 14px; opacity: 0.6; margin-top: 10px;">‡¥ï‡µç‡¥Ø‡¥æ‡¥Æ‡¥± ‡¥±‡µÜ‡¥°‡¥ø‡¥Ø‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ...</div>
    </div>
    
    <button id="start-button">START MAGIC üîä</button>

    <!-- 
      MindAR ‡¥™‡¥æ‡¥§‡µç‡¥§‡µç ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥Ç ‡¥í‡¥¥‡¥ø‡¥µ‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª JavaScript ‡¥µ‡¥¥‡¥ø ‡¥∏‡µÜ‡¥±‡µç‡¥±‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ. 
      ‡¥™‡µç‡¥∞‡¥ø‡¥µ‡µç‡¥Ø‡µÇ‡¥µ‡¥ø‡µΩ ‡¥µ‡µº‡¥ï‡µç‡¥ï‡µç ‡¥Ü‡¥ï‡¥æ‡µª ‡¥§‡¥æ‡µΩ‡¥ï‡µç‡¥ï‡¥æ‡¥≤‡¥ø‡¥ï‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥í‡¥∞‡µÅ ‡¥∏‡¥æ‡¥Æ‡µç‡¥™‡¥ø‡µæ ‡¥≤‡¥ø‡¥ô‡µç‡¥ï‡µç ‡¥®‡µΩ‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ.
    -->
    <a-scene 
      id="main-scene"
      mindar-image="imageTargetSrc: https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/card.mind; filterMinCF:0.0001; filterBeta: 0.001; warmupTolerance: 7; missTolerance: 50" 
      color-space="sRGB" 
      renderer="colorManagement: true, physicallyCorrectLights" 
      vr-mode-ui="enabled: false" 
      device-orientation-permission-ui="enabled: false">

      <a-assets>
        <!-- ‡¥µ‡µÄ‡¥°‡¥ø‡¥Ø‡µã ‡¥´‡¥Ø‡µΩ -->
        <video id="ar-video" preload="auto" loop crossorigin="anonymous" playsinline webkit-playsinline>
          <source src="https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.2.5/examples/image-tracking/assets/card-example/portfolio/portfolio.mp4" type="video/mp4">
        </video>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-video id="video-display" src="#ar-video" position="0 0 0" height="0.552" width="1" rotation="0 0 0"></a-video>
      </a-entity>
    </a-scene>

    <script>
      const startButton = document.getElementById('start-button');
      const loadingScreen = document.getElementById('loading-screen');
      const statusLog = document.getElementById('status-log');
      const video = document.getElementById('ar-video');
      const sceneEl = document.querySelector('a-scene');

      function log(msg, isError = false) {
        console.log(msg);
        const color = isError ? "#ff4444" : "#00ff00";
        statusLog.innerHTML += `<br><span style="color: ${color}">${msg}</span>`;
      }

      // ‡¥´‡¥Ø‡µΩ ‡¥™‡¥æ‡¥§‡µç‡¥§‡µÅ‡¥ï‡µæ ‡¥∂‡¥∞‡¥ø‡¥Ø‡¥æ‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
      window.addEventListener('load', () => {
        log("üåê ‡¥µ‡µÜ‡¥¨‡µç‡¥∏‡µà‡¥±‡µç‡¥±‡µç ‡¥≤‡µã‡¥°‡µç ‡¥Ü‡¥Ø‡¥ø.");
        
        // ‡¥á‡¥§‡µç GitHub-‡µΩ ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç ‡¥™‡µç‡¥∞‡¥µ‡µº‡¥§‡µç‡¥§‡¥ø‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï
        if (window.location.protocol !== 'blob:') {
            log("üìÅ GitHub ‡¥≤‡µã‡¥ï‡µç‡¥ï‡µΩ ‡¥´‡¥Ø‡¥≤‡µÅ‡¥ï‡µæ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ.");
            // ‡¥§‡¥æ‡¥¥‡µÜ ‡¥ï‡¥æ‡¥£‡µÅ‡¥®‡µç‡¥® ‡¥µ‡¥∞‡¥ø‡¥ï‡µæ ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥´‡¥Ø‡¥≤‡µÅ‡¥ï‡µæ ‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç
            // sceneEl.setAttribute('mindar-image', 'imageTargetSrc: ./targets.mind;');
            // const videoSource = document.querySelector('#ar-video source');
            // videoSource.setAttribute('src', './video.mp4');
            // video.load();
        } else {
            log("üß™ ‡¥™‡µç‡¥∞‡¥ø‡¥µ‡µç‡¥Ø‡µÇ ‡¥Æ‡µã‡¥°‡µç: ‡¥∏‡¥æ‡¥Æ‡µç‡¥™‡¥ø‡µæ ‡¥´‡¥Ø‡¥≤‡µÅ‡¥ï‡µæ ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ.");
        }
      });

      sceneEl.addEventListener("arReady", () => {
        log("‚úÖ ‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡¥Ç ‡¥±‡µÜ‡¥°‡¥ø! (System Ready)");
        log("üëâ START MAGIC ‡¥¨‡¥ü‡µç‡¥ü‡µ∫ ‡¥Ö‡¥Æ‡µº‡¥§‡µç‡¥§‡µÅ‡¥ï.");
        loadingScreen.style.display = "none"; 
        startButton.style.display = "block";  
      });
      
      sceneEl.addEventListener("arError", (event) => {
        log("‚ùå ‡¥™‡¥ø‡¥∂‡¥ï‡µç: ‡¥´‡¥Ø‡¥≤‡µÅ‡¥ï‡µæ ‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥ï‡¥¥‡¥ø‡¥û‡µç‡¥û‡¥ø‡¥≤‡µç‡¥≤!", true);
        loadingScreen.innerHTML = "<div style='color:red; padding: 20px; text-align:center;'><b>ERROR:</b> ‡¥´‡¥Ø‡¥≤‡µÅ‡¥ï‡µæ ‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡¥§‡¥ø‡µΩ ‡¥™‡¥ø‡¥∂‡¥ï‡µç. GitHub Pages ‡¥≤‡¥ø‡¥ô‡µç‡¥ï‡µç ‡¥µ‡¥¥‡¥ø ‡¥§‡µÅ‡¥±‡¥ï‡µç‡¥ï‡µÅ‡¥ï.</div>";
      });

      video.addEventListener("loadeddata", () => log("‚úÖ ‡¥µ‡µÄ‡¥°‡¥ø‡¥Ø‡µã ‡¥§‡¥Ø‡µç‡¥Ø‡¥æ‡¥±‡¥æ‡¥£‡µç."));
      video.addEventListener("error", () => log("‚ùå ‡¥µ‡µÄ‡¥°‡¥ø‡¥Ø‡µã ‡¥≤‡µã‡¥°‡µç ‡¥™‡¥ø‡¥∂‡¥ï‡µç.", true));

      startButton.addEventListener('click', () => {
        log("üîç ‡¥∏‡µç‡¥ï‡¥æ‡µª ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ... ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µç ‡¥®‡µá‡¥∞‡µÜ ‡¥™‡¥ø‡¥ü‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï.");
        video.muted = false;
        video.play().then(() => {
          video.pause();
          video.currentTime = 0;
          startButton.style.display = 'none';
        }).catch(err => {
          log("‚ö†Ô∏è ‡¥ì‡¥°‡¥ø‡¥Ø‡µã ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥Ç: " + err.message, true);
        });
      });

      const arEntity = document.querySelector('[mindar-image-target]');
      
      arEntity.addEventListener("targetFound", () => {
        log("üéØ ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø! ‡¥µ‡µÄ‡¥°‡¥ø‡¥Ø‡µã ‡¥§‡µÅ‡¥ü‡¥ô‡µç‡¥ô‡µÅ‡¥®‡µç‡¥®‡µÅ...");
        video.play().catch(e => log("‚ùå ‡¥™‡µç‡¥≤‡µá ‡¥™‡¥ø‡¥∂‡¥ï‡µç: " + e.message, true));
      });

      arEntity.addEventListener("targetLost", () => {
        log("‚ö†Ô∏è ‡¥´‡µã‡¥ü‡µç‡¥ü‡µã ‡¥®‡¥∑‡µç‡¥ü‡¥™‡µç‡¥™‡µÜ‡¥ü‡µç‡¥ü‡µÅ.");
        video.pause();
      });
    </script>
  </body>
</html>
